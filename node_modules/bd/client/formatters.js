define([
  "dojo/_base/declare"


], function(
  declare

){

	var monthNames = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');
	var dayNames = 'Sun Mon Tue Wed Thr Fri Sat'.split(' ');

	return {
	

		contactName: function( o ){
			return sharedFunctions.bd.renderContactName( o );
		},
		
    contactNames: function( a ){
    	var r = [];
    	for( var i = 0, l = a.length; i < l; i ++ ){
    		o = a[ i ];
    		r.push( sharedFunctions.bd.renderContactName( o ) );
    	}
    	return r.join( ', ' )
		},
		
    dateFull: function( d, params ){

    	var d = new Date( d );
    	var dd = d.getDate();
      var mm = d.getMonth() + 1;
      var yyyy = d.getFullYear();

      var hours = d.getHours();
      var minutes = d.getMinutes();
      var seconds = d.getSeconds();

      return dd + "/" + mm + "/" + yyyy + " " + hours + ":" + minutes + ":" + seconds;
    },

		dateAlaGoogle: function( d ){
			var now = new Date();
			var deltaHours = ( now - d ) / 1000 / 60 / 60;

			function formatHours( d ){
				return d.getHours() + ":" + (d.getMinutes() < 10 ? '0' : '' ) + d.getMinutes()
			}

			function formatDate( d, showYear ){
				return monthNames[ d.getMonth() ] + ', ' + d.getDate() + ( showYear ? ' ' + d.getFullYear() : '' );
			}

			// Year is different. Print full date
			if( now.getFullYear() != d.getFullYear() ){
				return formatDate( d, true );
			}
			// This year, but longer than 1 week: full date without the year
			else if( deltaHours >= 144 ){
				return formatDate( d, false );				
			}
      // This week, but different day of the week
			else if( d.getDay() != now.getDay() ){
				return dayNames[ d.getDay() ] + ' ' + formatHours( d );				
			}
			else {
				return formatHours( d );
			} 

		}

	}

});