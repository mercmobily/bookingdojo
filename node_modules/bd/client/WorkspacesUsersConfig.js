
define([
  "dojo/_base/declare"

, "dijit/layout/ContentPane"

, "hotplate/hotDojoWidgets/widgets"

, "hotplate/bd/WorkspacesUsersConfig/WorkspacesUsersInfo"
, "hotplate/bd/WorkspacesUsersConfig/WorkspacesUsersActivities"

, "hotplate/bd/WorkspacesContacts"
, "hotplate/hotDojoGlobals/globals"

], function(
  declare

, ContentPane

, widgets
, WorkspacesUsersInfo
, WorkspacesUsersActivities

, WorkspacesContacts
, globals

){

  return declare( [ widgets.DestroyableTemplatedContainer ], {

    templateString: '' +
      '<div class="workspaces-users-config">\n' +
      '  <div class="box">\n'+
      '    <p class="boxTitle">Your contact information</p>\n' +
      '    <div id="workspaces-users-config-contact-editor" data-dojo-attach-point="contactEditorWidget"></div>\n' +
      '  </div>\n' +
      
      '  <div data-dojo-type="hotplate/bd/WorkspacesUsersConfig/WorkspacesUsersInfo"></div>\n'+


      '  <span class="config-heading">Activities you do for this workspace</span>\n' +
      '  <div class="small-editable-list" data-dojo-type="hotplate/bd/WorkspacesUsersConfig/WorkspacesUsersActivities"></div>\n'+
    
      '</div>\n' +
      '',

    postCreate: function(){
      this.inherited(arguments);

      var self = this;

      var contactEditor = new WorkspacesContacts({
        storeName: 'workspacesContacts',
        storeParameters: { workspaceId: globals.workspaceId },
        recordId: vars.hotCoreStoreConfig.storeRecords.workspacesUsersInfo._children.workspacesContacts[0].id,
        selfEditing: true,
      }, self.contactEditorWidget);
    },


  });

});
