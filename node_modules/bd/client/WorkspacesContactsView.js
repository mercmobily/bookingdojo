/*
INPUT: 
  * workspaceId
  * contactId
DESCRIPTION
A widget to view basic details about a contact, as well as the list of messages attached to that particular contactId (via `WorkspacesContactsMessages`). Called when double-clicking on a contact in `WorkspacesContactsList`.
*/
define([
  "dojo/_base/declare"
, "dojo/dom-style"
, "dojo/topic"

, "hotplate/hotClientDojo/widgets/ViewingWidget"
, "hotplate/hotClientDojo/widgets/Dummy"
, "hotplate/bd/WorkspacesMessages/WorkspacesMessagesList"

], function(
  declare
, domStyle
, topic

, ViewingWidget
, Dummy
, WorkspacesMessagesList

){

  return declare( [ ViewingWidget ], {

    templateString: '' +
      '<div>\n' +
      '  <div class="workspaces-contacts-view" data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="gutters:false">\n' +
      '    <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:\'top\'">\n' +
      '      <div>\n' +
      '        <div data-dojo-attach-point="nameNode"></div>\n' +
      '        <div data-dojo-type="hotplate/hotClientDojo/widgets/Dummy"></div>\n'+
      '      </div>\n' +
      '    </div>\n' +
      '    <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:\'center\'">\n' +
      '      <div data-dojo-type="hotplate/bd/WorkspacesMessages/WorkspacesMessagesList" data-dojo-props="contactId: this.contactId, workspaceId: this.workspaceId, contactObject:this.contactObject"></div>\n'+
      '      <div data-dojo-type="hotplate/hotClientDojo/widgets/Dummy"></div>\n'+
      '    </div>\n' +
      '  </div>\n' +
      '</div>\n' +
      '',

    postMixInProperties: function(){
      this.inherited(arguments);

      this.info = { 
        workspacesContacts: { 
          id: this.contactId,
          storeParameters: { workspaceId: this.workspaceId }
        } 
      } 
    },

    renderInfo: function(){

      // Display the information
      var i = this.info.workspacesContacts.data;
      this.nameNode.innerHTML = ( i.firstName ? i.firstName + ' ' : '' ) + ( i.middleName? i.middleName + ' ': '' ) + ( i.lastName ? i.lastName : '' );
    },



  });
});

