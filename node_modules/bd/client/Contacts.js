
define([
  "dojo/_base/declare",
  "dojo/dom-construct",
  "dojo/query",

  'dijit/_WidgetBase',
  'dijit/layout/ContentPane',
  "dijit/_TemplatedMixin",
  "dijit/_WidgetsInTemplateMixin",
  'dijit/layout/TabContainer',
  'dijit/_Container',
  'dijit/layout/_ContentPaneResizeMixin',

  "hotplate/hotDojoWidgets/EditingWidget",
  "hotplate/hotDojoStores/stores",
  "hotplate/hotDojoGlobals/globals",

  "dgrid/OnDemandList",


   ], function(
     declare
     , domConstruct
     , query

     , _WidgetBase
     , ContentPane
     , _TemplatedMixin
     , _WidgetsInTemplateMixin
     , TabContainer
     , _Container
     ,  _ContentPaneResizeMixin
     , EditingWidget
     , stores
     , globals

     , OnDemandList

 ){





  var Contacts = declare('hotplate/bd/Contacts', [ _WidgetBase, _Container, _ContentPaneResizeMixin, _TemplatedMixin, _WidgetsInTemplateMixin,  ], {

    templateString: jade.compile('' +
    'div\n'+
    '  div(data-dojo-attach-point="dijit/layout/ContentPane" )\n' +
    '    div(data-dojo-attach-point="list")\n' +
    '')(),

    postCreate: function(){
      this.inherited(arguments);

      this.listWidget = new OnDemandList( {
        // store: stores('options', { workspaceId: globals.workspaceId } ),
        // renderRow: function(item, options){
        //  return domConstruct.create('div', { innerHTML:JSON.stringify(item), } );
        // },

      }, this.list);

      this.listWidget.on('.dgrid-row:click', function( e ) {
        console.log("Clicked!");
        console.log( e );
        console.log( this );
        console.log( list.row( this ) );
      });

    },

    startup: function(){
      // this.listWidget.startup();
    },

  });

 return Contacts;
});


