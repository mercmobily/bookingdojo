/*
INPUT: 
  
DESCRIPTION
The widget that will wait for the signal:
* hotplate/hotClientDojo/hooks/startup/after/app-container
When this signal comes, the "container" widget has been started up and it's
ready to contain whatever we want to add to it. In this case, it's the
"master" BookingDojo widget.
*/
define( [ 
  "hotplate/bd/storeEnhancer"	
, "hotplate/bd/BookingDojo"
, "hotplate/hotClientDojo/globals/globals"

, "dojo/topic"

], function(
  storeEnhancer
, BookingDojo
, globals
, topic
){

  // Set initial variables
  var workspaceId = globals.workspaceId;
  var loggedinUserContact = vars.bd.userContact;

  // Create the new BookingDojo application
  bookingDojo = new BookingDojo( { id: 'booking-dojo-whole', region: 'center', workspaceId: workspaceId, loggedinUserContact: loggedinUserContact } );

  // Once appContainer has started, add a widget to it
  topic.subscribe('hotplate/hotClientDojo/hooks/startup/after/app-container', function( widget ){
    widget.addChild( bookingDojo );
  });

});

